// Generated by purs version 0.14.2
"use strict";
var Affjax = require("../Affjax/index.js");
var Affjax_ResponseFormat = require("../Affjax.ResponseFormat/index.js");
var Components_Page = require("../Components.Page/index.js");
var Config = require("../Config/index.js");
var Control_Applicative = require("../Control.Applicative/index.js");
var Control_Bind = require("../Control.Bind/index.js");
var Control_Promise = require("../Control.Promise/index.js");
var Data_Either = require("../Data.Either/index.js");
var Data_Eq = require("../Data.Eq/index.js");
var Data_Functor = require("../Data.Functor/index.js");
var Data_HTTP_Method = require("../Data.HTTP.Method/index.js");
var Data_Maybe = require("../Data.Maybe/index.js");
var Data_Monoid = require("../Data.Monoid/index.js");
var Effect = require("../Effect/index.js");
var Effect_Aff = require("../Effect.Aff/index.js");
var Effect_Class = require("../Effect.Class/index.js");
var Effect_Console = require("../Effect.Console/index.js");
var Effect_Uncurried = require("../Effect.Uncurried/index.js");
var React_Basic = require("../React.Basic/index.js");
var React_Basic_DOM = require("../React.Basic.DOM/index.js");
var React_Basic_DOM_Generated = require("../React.Basic.DOM.Generated/index.js");
var React_Basic_Hooks = require("../React.Basic.Hooks/index.js");
var React_Basic_Hooks_Internal = require("../React.Basic.Hooks.Internal/index.js");
var Type_Equality = require("../Type.Equality/index.js");
var mkHome = (function () {
    var render = function (props) {
        return React_Basic.fragment([ React_Basic_DOM_Generated.div()({
            className: "max-w-5xl flex mx-auto my-12",
            children: [ React_Basic_DOM_Generated.div()({
                className: "mr-1 text-gray-100 w-3/5 shadow-2xl bg-gray-800 p-12 text-left",
                children: [ React_Basic_DOM_Generated.h1()({
                    className: "text-3xl font-bold",
                    children: [ React_Basic_DOM.text(props.header) ]
                }), React_Basic_DOM_Generated.div()({
                    className: "w-4/5 pt-3 border-b-2 border-teal-500"
                }), React_Basic_DOM_Generated.p()({
                    className: "pt-4 text-sm",
                    children: [ React_Basic_DOM.text("Welcome to my Next.js with Purescript Example!") ]
                }) ]
            }), React_Basic_DOM_Generated.div()({
                className: "w-2/5",
                children: [ React_Basic_DOM_Generated.img()({
                    className: "shadow-2xl",
                    src: "https://source.unsplash.com/IuLgi9PWETU"
                }) ]
            }) ]
        }) ]);
    };
    return Components_Page.component("Home")(function (env) {
        return function (props) {
            return React_Basic_Hooks_Internal.bind(React_Basic_Hooks_Internal.ixBindRender)(React_Basic_Hooks.useContext(env.settings))(function (settings) {
                return React_Basic_Hooks_Internal.discard(React_Basic_Hooks_Internal.ixBindRender)(React_Basic_Hooks.useEffect(Data_Maybe.eqMaybe(Data_Eq.eqString))(settings)(function __do() {
                    Effect_Console.log(Data_Maybe.fromMaybe("No settings")(settings))();
                    return Data_Monoid.mempty(Effect.monoidEffect(Effect.monoidEffect(Data_Monoid.monoidUnit)))();
                }))(function () {
                    return Control_Applicative.pure(React_Basic_Hooks_Internal.applicativeRender(Type_Equality.refl))(render(props));
                });
            });
        };
    });
})();
var fetchData = function (v) {
    return Control_Bind.bind(Effect_Aff.bindAff)(Affjax.request({
        method: new Data_Either.Left(Data_HTTP_Method.GET.value),
        url: Config.apiEndpoint + "/posts/1",
        headers: Affjax.defaultRequest.headers,
        content: Affjax.defaultRequest.content,
        username: Affjax.defaultRequest.username,
        password: Affjax.defaultRequest.password,
        withCredentials: Affjax.defaultRequest.withCredentials,
        responseFormat: Affjax_ResponseFormat.string,
        timeout: Affjax.defaultRequest.timeout
    }))(function (res) {
        return Control_Bind.discard(Control_Bind.discardUnit)(Effect_Aff.bindAff)(Effect_Class.liftEffect(Effect_Aff.monadEffectAff)(Effect_Console.log(Data_Either.either(Affjax.printError)(function (v1) {
            return v1.body;
        })(res))))(function () {
            return Control_Applicative.pure(Effect_Aff.applicativeAff)({
                header: "Home"
            });
        });
    });
};
var getServerSideProps = Effect_Uncurried.mkEffectFn1((function () {
    var $4 = Data_Functor.map(Effect_Aff.functorAff)(function (v) {
        return {
            props: v
        };
    });
    return function ($5) {
        return Control_Promise.fromAff($4(fetchData($5)));
    };
})());
module.exports = {
    mkHome: mkHome,
    getServerSideProps: getServerSideProps
};
